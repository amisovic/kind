echo "------------------------------------------------"
echo "Check if kubernetes.default DNS server is reachable from dnsutils test pod" 
echo "------------------------------------------------"
kubectl exec -i -t dnsutils -- nslookup kubernetes.default
kubectl exec -i -t dnsutils -- nslookup github.com

echo ""
echo "------------------------------------------------"
echo "Check if the /etc/resolv.conf is correct on the dnsutils test pod"
echo "------------------------------------------------"
kubectl exec -ti dnsutils -- cat /etc/resolv.conf

echo ""
echo "------------------------------------------------"
echo "Check if DNS server is running"
echo "------------------------------------------------"
kubectl get pods --namespace=kube-system -l k8s-app=kube-dns


echo ""
echo "------------------------------------------------"
echo "Check Log files of the DNS servers"
echo "------------------------------------------------"
kubectl logs --namespace=kube-system -l k8s-app=kube-dns

echo ""
echo "------------------------------------------------"
echo "SERVICES in kube-system"
echo "------------------------------------------------"
kubectl get svc --namespace=kube-system

echo ""
echo "------------------------------------------------"
echo "ENDPOINTS in kube-system"
echo "------------------------------------------------"
kubectl get endpoints kube-dns --namespace=kube-system

echo ""
echo "------------------------------------------------"
echo "CONFIGMAP of coredns service"
echo "------------------------------------------------"
kubectl -n kube-system get  configmap coredns -o yaml

